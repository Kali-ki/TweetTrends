<html>

<head>
    <title>Projet DE</title>
    <script type="text/javascript" src="/eel.js"></script>
    <style>
        body {
            background: rgb(136, 210, 222);
            color: white;
            font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        }
        img {
            height: 100px;
        }
        #kewordslist{
            display: flex;
            flex-direction: row;
        }
    </style>
</head>

<body>
    <h1>Trends timeline</h1>
    <select name="periods" id="periods">
        <!--datestopropose-->
      </select>
      <div id="kewordslist">

      </div>
    <script type="text/javascript">
        document.getElementById('periods').addEventListener('change',(evt)=>{
            changePeriodJs(evt.target.value)
        })
        
        
        eel.expose(changePeriodJs);
        function changePeriodJs(periodid){
            eel.loadPeriodPy(periodid)
        }
        
        eel.expose(loadPeriodJs);
        function loadPeriodJs(periodinfos) {
            let el = document.getElementById('kewordslist')
            el.innerHTML = '';
            for(let keywordinfo of periodinfos){
                // récupération de l'image générée dans le dossier 'images'
                fetch('images/'+(keywordinfo.illustration))
                .then(response => response.blob())
                .then(blob => {
                    // création de l'élélement image
                    const img = document.createElement('img');
                    img.src = URL.createObjectURL(blob);
                    img.className='illustration';
                    // encapsulation de l'élément dans des div (pour légender l'image)
                    const vignette = document.createElement('div');
                    vignette.className='vignette';
                    vignette.innerHTML='<span class="description">'+keywordinfo.keyword+'</span>';
                    vignette.appendChild(img);
                    el.appendChild(img);
                })
            }
            }
    </script>
</body>
</html>